## 量化交易定义
量化交易基于数学模型与计算机算法，通过量化分析识别交易机会，利用自动化系统执行交易决策。
### 优势
量化交易能快速处理大量数据，减少人为情绪干扰，提高交易效率和准确性。 通过历史数据回测和优化策略，量化交易可有效评估和控制风险。

## 模型开发阶段：

### 交易想法（灵感/策略）的选择
- 交易想法可来自多种渠道，如市场观察、学术研究、技术分析等。 通过观察市场趋势、研究经济数据或分析技术指标，产生具有潜力的交易想法。
- 量化交易的策略，可以是很简单的，也可以是很复杂的，比如这个网站中的这些策略：http://study-quant.s3-website-ap-southeast-2.amazonaws.com/6/ 
都是没有基于机器学习算法的策略。  
[foreignInvestmentStrategy.py](demo/foreignInvestmentStrategy.py) 是基于外资的一个量化交易策略，没有包含任何的机器学习算法。

### 数学建模
- 将交易想法转化为数学模型，明确输入输出关系，为后续编程实现提供基础。数学模型应简洁明了，易于理解和实现，同时能准确反映交易逻辑。
- 数据获取与整理 
  - Python拥有众多强大的库用于获取股票数据，如pandas- datareader库可从雅虎财经获取历史价格数据。 获取数据后，利用pandas库对数据进行清洗和预处理，为后续分析奠定基础。
  - 数据预处理，数据清洗
- 建立特征工程（选择**因子**）
  - 特征选择：选择对模型性能有较大影响的特征（**因子**），剔除冗余特征，提高模型的准确性和效率。
特征选择可通过统计方法、模型评估等方式进行，也可以通过专家完成。实践中，专家给出的特征有时很高效
  - 特征构造：通过现有特征组合或变换生成新的特征，增强模型对数据的表达能力。
例如，将两个相关特征相加或相乘，生成新的特征用于模型训练。比如macd，ROE都是一家企业的特征
  - 特征归一化：将特征值缩放到同一范围，提高模型收敛速度，避免因特征量纲差异导致的偏差。
常用的归一化方法包括最小 - 最大归一化和Z - 分数归一化。金融领域通常使用Z-Score，即每个样本点减去所在特征的均值除以标准差

### 编程实现
- 将数学模型转化为计算机程序，用于后续的测试和执行，确保模型的可操作性。编程实现需考虑代码的可读性、可维护性和效率，便于后续优化和调整。

## 模型开发完成后，优化阶段：

### 历史数据测试(回测)
- 使用历史数据测试策略的有效性，评估其在不同市场条件下的表现，如牛市、熊市、震荡市等。
历史数据测试可帮助发现策略的优缺点，为优化提供依据。
- ***论文点***：通过交叉验证的方式，进行模型的测试和验证，参考：[数据集的交叉验证(Cross Validation)](https://www.cnblogs.com/pinard/p/5992719.html)

### 模型调优
- 调整模型参数以提高策略的性能，如调整交易信号的阈值、止损止盈点等。 
参数优化需在历史数据上进行，同时避免过度拟合，确保策略的泛化能力。
  - 超参数调优 
  - 实际应用中Python的存在你可以快速实现多种机器学习模型的超参数搜索。
     -  网格搜索 网格搜索是一种穷举搜索方法，通过遍历所有可能的超参数组合，找到最优的超参数。
网格搜索可确保找到全局最优解，但计算成本较高。
     -  随机搜索 随机搜索在超参数空间中随机采样，寻找最优超参数，计算成本较低。
随机搜索可在有限的计算资源下，快速找到较好的超参数组合。
  - 过拟合处理
     - 正则化
     - Lasso回归（Least Absolute Shrinkage and Selection Operator）结合了普通线性回归和L1正则化的回归方法，其核心优势在于自动特征选择与防止过拟合，提升模型泛化能力。 
核心的机制通过L1正则化将不重要的特征的系数压缩到0
  - 可视化分析，Python中的matplotlib和seaborn库可用于对股票数据进行可视化分析，绘制折线图、柱状图等。
可视化分析帮助投资者快速发现股票价格的波动趋势、季节性变化等特征。

### 风险评估
- 评估策略的风险特征，如最大回撤、夏普比率等，确保策略在风险可控的情况下获取收益。 风险评估可帮助投资者了解策略的风险水平，做出合理的投资决策。
- Python还可用于计算风险指标，如VaR，设置止损和止盈点，控制风险。

## 其他
### 交易自动化
- Python的交互式经纪商API（如Interactive Brokers的API）可实现股票交易的自动化。
### 集成学习
- Bagging通过构建多个子模型，并对子模型的预测结果进行平均或投票，提高模型的稳定性和准确性。 Bagging可有效减少模型的方差，适用于高方差模型。
  - 随机森林(Random Forest)是一种集成学习方法，通过构建多棵决策树并整合其预测结果来提升模型性能。
- Boosting通过逐步训练多个弱模型，并将前一个模型的错误反馈到下一个模型中，提高模型的性能。 Boosting可有效提高模型的偏差和方差，适用于复杂数据集。
  - XGBoost（eXtreme Gradient Boosting）是基于Boosting框架的一个算法工具包（包括工程实现） ，XGBoost是目前在股票的量化实践中应用比较多的一种机器学习模型。
    - 核心思想：从错误中学习，即逐步修正前序模型的残差来提升预测精度。 
    - 多轮迭代：每个新加入的模型都聚焦前序模型未能解释的数据模式.
- Stacking将多个模型的预测结果作为输入，训练一个新的模型进行最终预测，进一步提升模型性能。 Stacking可综合多个模型的优点，提高预测的准确性和泛化能力。